This project is developed using Tuya SDK, which enables you to quickly develop branded apps connecting and controlling smart scenarios of many devices.         For more information, please check Tuya Developer Website.


# 一种低成本的涂鸦智能开窗器

使用低成本的窗帘轨道制作的基于涂鸦三明治开发板的智能开窗器原型。轨道结构基本证实可行，演示视频会放在Bilibili平台！

## 项目由来
家里窗户的开关确实是个痛点，早上出门前肯定是要开窗通风的，上班期间一旦下雨真的是忐忑到下班。
也关注到网上已经出现了智能平移开窗器，但是1.5米基本上要300元以上了，而且都是使用的直插电源，家里是没有预留这个窗户电源的，改造极不方便！
一早就有了自己DIY一个智能开窗器的想法，这次涂鸦的宠物喂食器活动刚好会用到电机驱动板，所以就试一试！
## 应用场景

家庭智能窗户控制,早晚自动开关窗户,下雨可自动关窗，可以手机APP、语音、433遥控控制开关窗！等等...

## 整体构造
1)定制亚克力底板与窗户外框螺丝固定连接,后续考虑用定制铝合金框更轻更坚固.

2)JGY370减速电机+支架固定在亚克力底板上.

3)涂鸦三明治主板,电机板固定在亚克力底板上.

4)暂时使用移动电源作为电源给主板和电机供电.

5)JGY370减速电机与没轨之间用钢丝绳连接,成本底,钢丝绳也比较紧固.

6)滑块与要开关的窗户使用螺杆软连接,这样窗户关紧以后还可以短距离手动移动,以实现手动开窗的检测!

7)后续原型成功以后考虑立创EDA画电路板，实现两节18650或26650电池供电，并加入充电电路！

## 功能设计

1)手机及语音控制开关窗户，实现开窗百分比控制，这点由涂鸦Wifi模块和涂鸦APP来完成就行了，已经在MCU代码中实现！

2)实现手动开窗的逻辑:窗户上固定小型磁铁,MCU连接两个干簧管检测窗户的运行位置,
一旦在开或关的状态下干簧管开关的状态改变则认为是有手动开关窗户动作,电机启动开/关窗户.

3)打开涂鸦天气信息同步服务，实现根据天气预报判断开关窗户，有雨不开窗，预报空气质量好的天气自动开窗透气；

4)接入433无线接收器，实现普通433遥控器开关窗户功能；

5)待续：主体功能实现以后，因为MCU端口较多，空余端口用来接入其它两扇窗户以及窗帘。实现MCU+涂鸦模组的功能最大化，同时控制3个窗户电机，一个窗帘电机！

6)刚刚提到下雨自动关窗,看到DIY一个雨滴检测传感器的项目要提上议程了；

7)新增功能：接入紫外线传感器，实现夏天阳光强烈时关闭窗帘；

## 开发物料

涂鸦三明治开发板：语音通信模组板+电源板+H桥电机驱动板

LGT328P Nano开发板（兼容ATmega328P Arduino Nano开发板的国产MCU开发板，价格只要5元左右，国产骄傲！用Arduino IDE开发顺利，基本无坑！）

JGY370减速电机（买的是12V 10转的，目前看来太慢了，后续会采购40转的调试！）

窗帘轨道，某宝10元左右每米，包插辅料都送齐了，我窗户只用了0.75米！可以让店家截断好发货！

滑轮，螺丝，亚克力辅料若干！

## 开发过程
3月20日核心代码+SDK移植基本完成，等待涂鸦通信模组到货联机调试！
3月25日主窗户机械部分反复修改测试基本通过，智能开关窗，手动开关窗，天气同步，433无线开关窗，整体调试完成上线！
3月29日联机测试运行状况，代码上传Github，并拍摄演示视频上传；
原定4月30日前完成其它两扇窗户以及窗帘的整体接入控制，目前看来LGT328P的程序空间可能不太够！正在测试能否精减代码！
